(this["webpackJsonpglasswall-file-type-detection"]=this["webpackJsonpglasswall-file-type-detection"]||[]).push([[0],{115:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a.n(l),i=(a(67),a(3)),o=(a(30),a(58)),s=a.n(o),u=a(14),f=a.n(u),m=a(28);var p=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],f=s[1],m=function(e){e.preventDefault(),e.stopPropagation()},p=function(e){e.preventDefault(),e.stopPropagation(),f(u++),e.dataTransfer.items&&e.dataTransfer.items.length>0&&c(!0)},d=function(e){e.preventDefault(),e.stopPropagation(),f(u--),0===u&&c(!1)},v=function(t){if(t.preventDefault(),t.stopPropagation(),c(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0){e.handleDrop(t.dataTransfer.files);try{t.dataTransfer.clearData()}catch(a){}f(0)}},E=r.a.createRef();return Object(n.useEffect)((function(){var e=E.current;return e.addEventListener("dragenter",p),e.addEventListener("dragleave",d),e.addEventListener("dragover",m),e.addEventListener("drop",v),function(){e.removeEventListener("dragenter",p),e.removeEventListener("dragleave",d),e.removeEventListener("dragover",m),e.removeEventListener("drop",v)}}),[]),r.a.createElement("div",{className:"drop-border",ref:E},l&&r.a.createElement("div",{className:"drop-border-dragging"}),e.children)},d=a(60);a(69);var v=function(e){var t,a=e.fileName,n=e.fileExtension,l=e.fileType,c=e.fileSize;return t=a.length>40?a.substring(0,40):a,r.a.createElement("tr",{className:n!==l?"type-danger":""},r.a.createElement(d.a,{content:a},r.a.createElement("td",null,a===t?a:"".concat(t,"...").concat(n))),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,c))};var E=function(e){return r.a.createElement("section",{className:"results-section"},r.a.createElement("div",{className:"file-attributes table-container"},r.a.createElement("h1",{className:"table-header"},"File Attributes"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",{className:"header-row"},r.a.createElement("th",null,"File Name"),r.a.createElement("th",null,"Declared File Type"),r.a.createElement("th",null,"Actual File Type"),r.a.createElement("th",null,"File Size"))),r.a.createElement("tbody",null,e.results&&e.results.map((function(e,t){return r.a.createElement(v,Object.assign({key:"result-".concat(t)},e))}))))))},h=function(e,t){var a=new FormData;return a.append("file",t),console.log(t),fetch("https://xugc5ib648.execute-api.eu-west-1.amazonaws.com/Prod/api/FileTypeDetection",{method:"POST",body:a,headers:{"x-api-key":e}})};a(72);var g=function(e){return e.loading?r.a.createElement("div",{className:"spinner-container"},r.a.createElement("div",{className:"spinner"})):null},b=a(117),y=a(59),j=a.n(y),w=function(e){var t=new j.a;return new Promise((function(a,n){t.loadAsync(e).then((function(e){var t=Object.values(e.files),r=[];Array.from(t).forEach(function(){var e=Object(m.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dir||r.push(t.async("blob").then((function(e){return e.name=t.name,e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Promise.all(r).then(a,n)}),n)}))};var N=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],d=s[1],v=Object(n.useState)(!1),y=Object(i.a)(v,2),j=y[0],N=y[1];return r.a.createElement("div",{className:"app-body"},r.a.createElement("h1",null,"Drag and drop files to determine their file type. Files in Zip's will be determined separately."),r.a.createElement(p,{handleDrop:function(t){N(!0),d(!1),c([]);var a=[],n=[],r=function(t,a){return new Promise((function(n){var r={fileName:t.name,fileExtension:a,fileType:"Unknown",fileSize:0},l=function(){var a=Object(m.a)(f.a.mark((function a(){var l,o;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h(e.apiKey,t);case 3:return l=a.sent,a.next=6,c(l);case 6:o=a.sent,i(o,t),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:n(r);case 14:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}}(),c=function(e){return 200!==e.status?(console.log(e),{fileType:"Error",fileSize:0,status:e.status}):e.json()},i=function(e){return r.fileType=e.fileType.toLowerCase(),r.fileSize=e.fileSize,e};l()}))};Array.from(t).forEach((function(e){var t=e.name.split(".").pop().toLowerCase();if("zip"===t){var l=w(e).then((function(a){a.forEach((function(a){t=a.name.split(".").pop().toLowerCase(),a.name="["+e.name+"] -> "+a.name,n.push(r(a,t))}))}),(function(a){console.log(a),n.push(r(e,t))}));a.push(l)}else n.push(r(e,t))})),Promise.all(a).then((function(e){Promise.all(n).then((function(e){c(e),d(!0),N(!1)}))}),(function(e){console.log(e)}))}},r.a.createElement("div",{className:"loading-container"},r.a.createElement(g,{key:6,loading:j}))),r.a.createElement(b.a,{in:u,timeout:{enter:500,exit:500},classNames:"results"},r.a.createElement(r.a.Fragment,null,u&&r.a.createElement(E,{results:l}))))};var O=function(){var e=Object(n.useState)("v1j1jXSdPo8Z7iRW4H34va89ho9mt6KV5y9zezVn"),t=Object(i.a)(e,2),a=t[0],l=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app-header"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:s.a,alt:"Logo",height:"90"}))),r.a.createElement("input",{type:"text",placeholder:"Api Key",onInput:function(e){l(e.target.value)},hidden:!0}),r.a.createElement(N,{apiKey:a})))};c.a.render(r.a.createElement(O,null),document.getElementById("root"))},30:function(e,t,a){},58:function(e,t,a){e.exports=a.p+"static/media/logo.6c8e5727.svg"},62:function(e,t,a){e.exports=a(115)},67:function(e,t,a){},80:function(e,t){},82:function(e,t){}},[[62,1,2]]]);
//# sourceMappingURL=main.45206c7a.chunk.js.map